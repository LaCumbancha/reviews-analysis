networks:
  testing_net:
    ipam:
      config:
      - subnet: 172.25.125.0/24
      driver: default
services:
  best_users_prettier:
    container_name: best_users_prettier
    depends_on:
    - sink
    entrypoint: /prettier
    environment:
    - BESTUSERPRE_RABBITMQ_IP=rabbitmq
    - BESTUSERPRE_RABBITMQ_PORT=5672
    - BESTUSERPRE_BESTUSER_JOINERS=4
    image: best_users_prettier:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  bestuser_joiner0:
    container_name: bestuser_joiner0
    depends_on:
    - best_users_prettier
    entrypoint: /joiner
    environment:
    - BESTUSERJOIN_INSTANCE=0
    - BESTUSERJOIN_RABBITMQ_IP=rabbitmq
    - BESTUSERJOIN_RABBITMQ_PORT=5672
    - BESTUSERJOIN_INPUT_TOPIC=0
    - BESTUSERJOIN_STARS_AGGREGATORS=4
    - BESTUSERJOIN_USER_FILTERS=6
    image: bestuser_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  bestuser_joiner1:
    container_name: bestuser_joiner1
    depends_on:
    - best_users_prettier
    entrypoint: /joiner
    environment:
    - BESTUSERJOIN_INSTANCE=1
    - BESTUSERJOIN_RABBITMQ_IP=rabbitmq
    - BESTUSERJOIN_RABBITMQ_PORT=5672
    - BESTUSERJOIN_INPUT_TOPIC=1
    - BESTUSERJOIN_STARS_AGGREGATORS=4
    - BESTUSERJOIN_USER_FILTERS=6
    image: bestuser_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  bestuser_joiner2:
    container_name: bestuser_joiner2
    depends_on:
    - best_users_prettier
    entrypoint: /joiner
    environment:
    - BESTUSERJOIN_INSTANCE=2
    - BESTUSERJOIN_RABBITMQ_IP=rabbitmq
    - BESTUSERJOIN_RABBITMQ_PORT=5672
    - BESTUSERJOIN_INPUT_TOPIC=2
    - BESTUSERJOIN_STARS_AGGREGATORS=4
    - BESTUSERJOIN_USER_FILTERS=6
    image: bestuser_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  bestuser_joiner3:
    container_name: bestuser_joiner3
    depends_on:
    - best_users_prettier
    entrypoint: /joiner
    environment:
    - BESTUSERJOIN_INSTANCE=3
    - BESTUSERJOIN_RABBITMQ_IP=rabbitmq
    - BESTUSERJOIN_RABBITMQ_PORT=5672
    - BESTUSERJOIN_INPUT_TOPIC=3
    - BESTUSERJOIN_STARS_AGGREGATORS=4
    - BESTUSERJOIN_USER_FILTERS=6
    image: bestuser_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  biz_scatter:
    container_name: biz_scatter
    depends_on:
    - citbiz_mapper0
    - citbiz_mapper1
    - citbiz_mapper2
    - citbiz_mapper3
    entrypoint: /scatter
    environment:
    - BIZSCA_BUSINESS_DATA=/data/business.json
    - BIZSCA_RABBITMQ_IP=rabbitmq
    - BIZSCA_RABBITMQ_PORT=5672
    - BIZSVA_WORKERS_POOL=200
    - BIZSCA_CITBIZ_MAPPERS=4
    image: biz_scatter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
    volumes:
    - business_dataset:/data
  bot_users_prettier:
    container_name: bot_users_prettier
    depends_on:
    - sink
    entrypoint: /prettier
    environment:
    - BOTUSERPRE_RABBITMQ_IP=rabbitmq
    - BOTUSERPRE_RABBITMQ_PORT=5672
    - BOTUSERPRE_BOTUSER_JOINERS=4
    image: bot_users_prettier:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  botuser_filter0:
    container_name: botuser_filter0
    depends_on:
    - botuser_joiner0
    - botuser_joiner1
    - botuser_joiner2
    - botuser_joiner3
    entrypoint: /filter
    environment:
    - BOTUSERFIL_INSTANCE=0
    - BOTUSERFIL_RABBITMQ_IP=rabbitmq
    - BOTUSERFIL_RABBITMQ_PORT=5672
    - BOTUSERFIL_MIN_REVIEWS=5
    - BOTUSERFIL_USER_AGGREGATORS=6
    - BOTUSERFIL_DISHASH_JOINERS=4
    image: botuser_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  botuser_filter1:
    container_name: botuser_filter1
    depends_on:
    - botuser_joiner0
    - botuser_joiner1
    - botuser_joiner2
    - botuser_joiner3
    entrypoint: /filter
    environment:
    - BOTUSERFIL_INSTANCE=1
    - BOTUSERFIL_RABBITMQ_IP=rabbitmq
    - BOTUSERFIL_RABBITMQ_PORT=5672
    - BOTUSERFIL_MIN_REVIEWS=5
    - BOTUSERFIL_USER_AGGREGATORS=6
    - BOTUSERFIL_DISHASH_JOINERS=4
    image: botuser_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  botuser_filter2:
    container_name: botuser_filter2
    depends_on:
    - botuser_joiner0
    - botuser_joiner1
    - botuser_joiner2
    - botuser_joiner3
    entrypoint: /filter
    environment:
    - BOTUSERFIL_INSTANCE=2
    - BOTUSERFIL_RABBITMQ_IP=rabbitmq
    - BOTUSERFIL_RABBITMQ_PORT=5672
    - BOTUSERFIL_MIN_REVIEWS=5
    - BOTUSERFIL_USER_AGGREGATORS=6
    - BOTUSERFIL_DISHASH_JOINERS=4
    image: botuser_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  botuser_filter3:
    container_name: botuser_filter3
    depends_on:
    - botuser_joiner0
    - botuser_joiner1
    - botuser_joiner2
    - botuser_joiner3
    entrypoint: /filter
    environment:
    - BOTUSERFIL_INSTANCE=3
    - BOTUSERFIL_RABBITMQ_IP=rabbitmq
    - BOTUSERFIL_RABBITMQ_PORT=5672
    - BOTUSERFIL_MIN_REVIEWS=5
    - BOTUSERFIL_USER_AGGREGATORS=6
    - BOTUSERFIL_DISHASH_JOINERS=4
    image: botuser_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  botuser_joiner0:
    container_name: botuser_joiner0
    depends_on:
    - bot_users_prettier
    entrypoint: /joiner
    environment:
    - BOTUSERJOIN_INSTANCE=0
    - BOTUSERJOIN_RABBITMQ_IP=rabbitmq
    - BOTUSERJOIN_RABBITMQ_PORT=5672
    - BOTUSERJOIN_INPUT_TOPIC=0
    - BOTUSERJOIN_DISHASH_FILTERS=4
    - BOTUSERJOIN_BOTUSERS_FILTERS=4
    image: botuser_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  botuser_joiner1:
    container_name: botuser_joiner1
    depends_on:
    - bot_users_prettier
    entrypoint: /joiner
    environment:
    - BOTUSERJOIN_INSTANCE=1
    - BOTUSERJOIN_RABBITMQ_IP=rabbitmq
    - BOTUSERJOIN_RABBITMQ_PORT=5672
    - BOTUSERJOIN_INPUT_TOPIC=1
    - BOTUSERJOIN_DISHASH_FILTERS=4
    - BOTUSERJOIN_BOTUSERS_FILTERS=4
    image: botuser_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  botuser_joiner2:
    container_name: botuser_joiner2
    depends_on:
    - bot_users_prettier
    entrypoint: /joiner
    environment:
    - BOTUSERJOIN_INSTANCE=2
    - BOTUSERJOIN_RABBITMQ_IP=rabbitmq
    - BOTUSERJOIN_RABBITMQ_PORT=5672
    - BOTUSERJOIN_INPUT_TOPIC=2
    - BOTUSERJOIN_DISHASH_FILTERS=4
    - BOTUSERJOIN_BOTUSERS_FILTERS=4
    image: botuser_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  botuser_joiner3:
    container_name: botuser_joiner3
    depends_on:
    - bot_users_prettier
    entrypoint: /joiner
    environment:
    - BOTUSERJOIN_INSTANCE=3
    - BOTUSERJOIN_RABBITMQ_IP=rabbitmq
    - BOTUSERJOIN_RABBITMQ_PORT=5672
    - BOTUSERJOIN_INPUT_TOPIC=3
    - BOTUSERJOIN_DISHASH_FILTERS=4
    - BOTUSERJOIN_BOTUSERS_FILTERS=4
    image: botuser_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  citbiz_mapper0:
    container_name: citbiz_mapper0
    depends_on:
    - funcit_joiner0
    - funcit_joiner1
    - funcit_joiner2
    - funcit_joiner3
    entrypoint: /mapper
    environment:
    - CITBIZMAP_INSTANCE=0
    - CITBIZMAP_RABBITMQ_IP=rabbitmq
    - CITBIZMAP_RABBITMQ_PORT=5672
    - CITBIZMAP_BUSINESSES_INPUTS=1
    - CITBIZMAP_FUNCIT_JOINERS=4
    image: citbiz_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  citbiz_mapper1:
    container_name: citbiz_mapper1
    depends_on:
    - funcit_joiner0
    - funcit_joiner1
    - funcit_joiner2
    - funcit_joiner3
    entrypoint: /mapper
    environment:
    - CITBIZMAP_INSTANCE=1
    - CITBIZMAP_RABBITMQ_IP=rabbitmq
    - CITBIZMAP_RABBITMQ_PORT=5672
    - CITBIZMAP_BUSINESSES_INPUTS=1
    - CITBIZMAP_FUNCIT_JOINERS=4
    image: citbiz_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  citbiz_mapper2:
    container_name: citbiz_mapper2
    depends_on:
    - funcit_joiner0
    - funcit_joiner1
    - funcit_joiner2
    - funcit_joiner3
    entrypoint: /mapper
    environment:
    - CITBIZMAP_INSTANCE=2
    - CITBIZMAP_RABBITMQ_IP=rabbitmq
    - CITBIZMAP_RABBITMQ_PORT=5672
    - CITBIZMAP_BUSINESSES_INPUTS=1
    - CITBIZMAP_FUNCIT_JOINERS=4
    image: citbiz_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  citbiz_mapper3:
    container_name: citbiz_mapper3
    depends_on:
    - funcit_joiner0
    - funcit_joiner1
    - funcit_joiner2
    - funcit_joiner3
    entrypoint: /mapper
    environment:
    - CITBIZMAP_INSTANCE=3
    - CITBIZMAP_RABBITMQ_IP=rabbitmq
    - CITBIZMAP_RABBITMQ_PORT=5672
    - CITBIZMAP_BUSINESSES_INPUTS=1
    - CITBIZMAP_FUNCIT_JOINERS=4
    image: citbiz_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  dishash_aggregator0:
    container_name: dishash_aggregator0
    depends_on:
    - dishash_filter0
    - dishash_filter1
    - dishash_filter2
    - dishash_filter3
    entrypoint: /aggregator
    environment:
    - DISHASHAGG_INSTANCE=0
    - DISHASHAGG_RABBITMQ_IP=rabbitmq
    - DISHASHAGG_RABBITMQ_PORT=5672
    - DISHASHAGG_INPUT_TOPIC=0
    - DISHASHAGG_HASH_AGGREGATORS=4
    - DISHASHAGG_DISHASH_FILTERS=4
    image: dishash_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  dishash_aggregator1:
    container_name: dishash_aggregator1
    depends_on:
    - dishash_filter0
    - dishash_filter1
    - dishash_filter2
    - dishash_filter3
    entrypoint: /aggregator
    environment:
    - DISHASHAGG_INSTANCE=1
    - DISHASHAGG_RABBITMQ_IP=rabbitmq
    - DISHASHAGG_RABBITMQ_PORT=5672
    - DISHASHAGG_INPUT_TOPIC=1
    - DISHASHAGG_HASH_AGGREGATORS=4
    - DISHASHAGG_DISHASH_FILTERS=4
    image: dishash_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  dishash_aggregator2:
    container_name: dishash_aggregator2
    depends_on:
    - dishash_filter0
    - dishash_filter1
    - dishash_filter2
    - dishash_filter3
    entrypoint: /aggregator
    environment:
    - DISHASHAGG_INSTANCE=2
    - DISHASHAGG_RABBITMQ_IP=rabbitmq
    - DISHASHAGG_RABBITMQ_PORT=5672
    - DISHASHAGG_INPUT_TOPIC=2
    - DISHASHAGG_HASH_AGGREGATORS=4
    - DISHASHAGG_DISHASH_FILTERS=4
    image: dishash_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  dishash_aggregator3:
    container_name: dishash_aggregator3
    depends_on:
    - dishash_filter0
    - dishash_filter1
    - dishash_filter2
    - dishash_filter3
    entrypoint: /aggregator
    environment:
    - DISHASHAGG_INSTANCE=3
    - DISHASHAGG_RABBITMQ_IP=rabbitmq
    - DISHASHAGG_RABBITMQ_PORT=5672
    - DISHASHAGG_INPUT_TOPIC=3
    - DISHASHAGG_HASH_AGGREGATORS=4
    - DISHASHAGG_DISHASH_FILTERS=4
    image: dishash_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  dishash_filter0:
    container_name: dishash_filter0
    depends_on:
    - botuser_joiner0
    - botuser_joiner1
    - botuser_joiner2
    - botuser_joiner3
    entrypoint: /filter
    environment:
    - DISHASHFIL_INSTANCE=0
    - DISHASHFIL_RABBITMQ_IP=rabbitmq
    - DISHASHFIL_RABBITMQ_PORT=5672
    - DISHASHFIL_DISHASH_AGGREGATORS=4
    - DISHASHFIL_DISHASH_JOINERS=4
    image: dishash_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  dishash_filter1:
    container_name: dishash_filter1
    depends_on:
    - botuser_joiner0
    - botuser_joiner1
    - botuser_joiner2
    - botuser_joiner3
    entrypoint: /filter
    environment:
    - DISHASHFIL_INSTANCE=1
    - DISHASHFIL_RABBITMQ_IP=rabbitmq
    - DISHASHFIL_RABBITMQ_PORT=5672
    - DISHASHFIL_DISHASH_AGGREGATORS=4
    - DISHASHFIL_DISHASH_JOINERS=4
    image: dishash_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  dishash_filter2:
    container_name: dishash_filter2
    depends_on:
    - botuser_joiner0
    - botuser_joiner1
    - botuser_joiner2
    - botuser_joiner3
    entrypoint: /filter
    environment:
    - DISHASHFIL_INSTANCE=2
    - DISHASHFIL_RABBITMQ_IP=rabbitmq
    - DISHASHFIL_RABBITMQ_PORT=5672
    - DISHASHFIL_DISHASH_AGGREGATORS=4
    - DISHASHFIL_DISHASH_JOINERS=4
    image: dishash_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  dishash_filter3:
    container_name: dishash_filter3
    depends_on:
    - botuser_joiner0
    - botuser_joiner1
    - botuser_joiner2
    - botuser_joiner3
    entrypoint: /filter
    environment:
    - DISHASHFIL_INSTANCE=3
    - DISHASHFIL_RABBITMQ_IP=rabbitmq
    - DISHASHFIL_RABBITMQ_PORT=5672
    - DISHASHFIL_DISHASH_AGGREGATORS=4
    - DISHASHFIL_DISHASH_JOINERS=4
    image: dishash_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_aggregator0:
    container_name: funbiz_aggregator0
    depends_on:
    - funcit_joiner0
    - funcit_joiner1
    - funcit_joiner2
    - funcit_joiner3
    entrypoint: /aggregator
    environment:
    - FUNBIZAGG_INSTANCE=0
    - FUNBIZAGG_RABBITMQ_IP=rabbitmq
    - FUNBIZAGG_RABBITMQ_PORT=5672
    - FUNBIZAGG_FUNBIZ_FILTERS=4
    - FUNBIZAGG_FUNCIT_JOINERS=4
    - FUNBIZAGG_INPUT_TOPIC=0
    image: funbiz_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_aggregator1:
    container_name: funbiz_aggregator1
    depends_on:
    - funcit_joiner0
    - funcit_joiner1
    - funcit_joiner2
    - funcit_joiner3
    entrypoint: /aggregator
    environment:
    - FUNBIZAGG_INSTANCE=1
    - FUNBIZAGG_RABBITMQ_IP=rabbitmq
    - FUNBIZAGG_RABBITMQ_PORT=5672
    - FUNBIZAGG_FUNBIZ_FILTERS=4
    - FUNBIZAGG_FUNCIT_JOINERS=4
    - FUNBIZAGG_INPUT_TOPIC=1
    image: funbiz_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_aggregator2:
    container_name: funbiz_aggregator2
    depends_on:
    - funcit_joiner0
    - funcit_joiner1
    - funcit_joiner2
    - funcit_joiner3
    entrypoint: /aggregator
    environment:
    - FUNBIZAGG_INSTANCE=2
    - FUNBIZAGG_RABBITMQ_IP=rabbitmq
    - FUNBIZAGG_RABBITMQ_PORT=5672
    - FUNBIZAGG_FUNBIZ_FILTERS=4
    - FUNBIZAGG_FUNCIT_JOINERS=4
    - FUNBIZAGG_INPUT_TOPIC=2
    image: funbiz_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_aggregator3:
    container_name: funbiz_aggregator3
    depends_on:
    - funcit_joiner0
    - funcit_joiner1
    - funcit_joiner2
    - funcit_joiner3
    entrypoint: /aggregator
    environment:
    - FUNBIZAGG_INSTANCE=3
    - FUNBIZAGG_RABBITMQ_IP=rabbitmq
    - FUNBIZAGG_RABBITMQ_PORT=5672
    - FUNBIZAGG_FUNBIZ_FILTERS=4
    - FUNBIZAGG_FUNCIT_JOINERS=4
    - FUNBIZAGG_INPUT_TOPIC=3
    image: funbiz_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_filter0:
    container_name: funbiz_filter0
    depends_on:
    - funbiz_aggregator0
    - funbiz_aggregator1
    - funbiz_aggregator2
    - funbiz_aggregator3
    entrypoint: /filter
    environment:
    - FUNBIZFIL_INSTANCE=0
    - FUNBIZFIL_RABBITMQ_IP=rabbitmq
    - FUNBIZFIL_RABBITMQ_PORT=5672
    - FUNBIZFIL_FUNBIZ_MAPPERS=4
    - FUNBIZFIL_FUNBIZ_AGGREGATORS=4
    image: funbiz_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_filter1:
    container_name: funbiz_filter1
    depends_on:
    - funbiz_aggregator0
    - funbiz_aggregator1
    - funbiz_aggregator2
    - funbiz_aggregator3
    entrypoint: /filter
    environment:
    - FUNBIZFIL_INSTANCE=1
    - FUNBIZFIL_RABBITMQ_IP=rabbitmq
    - FUNBIZFIL_RABBITMQ_PORT=5672
    - FUNBIZFIL_FUNBIZ_MAPPERS=4
    - FUNBIZFIL_FUNBIZ_AGGREGATORS=4
    image: funbiz_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_filter2:
    container_name: funbiz_filter2
    depends_on:
    - funbiz_aggregator0
    - funbiz_aggregator1
    - funbiz_aggregator2
    - funbiz_aggregator3
    entrypoint: /filter
    environment:
    - FUNBIZFIL_INSTANCE=2
    - FUNBIZFIL_RABBITMQ_IP=rabbitmq
    - FUNBIZFIL_RABBITMQ_PORT=5672
    - FUNBIZFIL_FUNBIZ_MAPPERS=4
    - FUNBIZFIL_FUNBIZ_AGGREGATORS=4
    image: funbiz_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_filter3:
    container_name: funbiz_filter3
    depends_on:
    - funbiz_aggregator0
    - funbiz_aggregator1
    - funbiz_aggregator2
    - funbiz_aggregator3
    entrypoint: /filter
    environment:
    - FUNBIZFIL_INSTANCE=3
    - FUNBIZFIL_RABBITMQ_IP=rabbitmq
    - FUNBIZFIL_RABBITMQ_PORT=5672
    - FUNBIZFIL_FUNBIZ_MAPPERS=4
    - FUNBIZFIL_FUNBIZ_AGGREGATORS=4
    image: funbiz_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_mapper0:
    container_name: funbiz_mapper0
    depends_on:
    - funbiz_filter0
    - funbiz_filter1
    - funbiz_filter2
    - funbiz_filter3
    entrypoint: /mapper
    environment:
    - FUNBIZMAP_INSTANCE=0
    - FUNBIZMAP_RABBITMQ_IP=rabbitmq
    - FUNBIZMAP_RABBITMQ_PORT=5672
    - FUNBIZMAP_REVIEWS_INPUTS=1
    - FUNBIZMAP_FUNBIZ_FILTERS=4
    image: funbiz_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_mapper1:
    container_name: funbiz_mapper1
    depends_on:
    - funbiz_filter0
    - funbiz_filter1
    - funbiz_filter2
    - funbiz_filter3
    entrypoint: /mapper
    environment:
    - FUNBIZMAP_INSTANCE=1
    - FUNBIZMAP_RABBITMQ_IP=rabbitmq
    - FUNBIZMAP_RABBITMQ_PORT=5672
    - FUNBIZMAP_REVIEWS_INPUTS=1
    - FUNBIZMAP_FUNBIZ_FILTERS=4
    image: funbiz_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_mapper2:
    container_name: funbiz_mapper2
    depends_on:
    - funbiz_filter0
    - funbiz_filter1
    - funbiz_filter2
    - funbiz_filter3
    entrypoint: /mapper
    environment:
    - FUNBIZMAP_INSTANCE=2
    - FUNBIZMAP_RABBITMQ_IP=rabbitmq
    - FUNBIZMAP_RABBITMQ_PORT=5672
    - FUNBIZMAP_REVIEWS_INPUTS=1
    - FUNBIZMAP_FUNBIZ_FILTERS=4
    image: funbiz_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funbiz_mapper3:
    container_name: funbiz_mapper3
    depends_on:
    - funbiz_filter0
    - funbiz_filter1
    - funbiz_filter2
    - funbiz_filter3
    entrypoint: /mapper
    environment:
    - FUNBIZMAP_INSTANCE=3
    - FUNBIZMAP_RABBITMQ_IP=rabbitmq
    - FUNBIZMAP_RABBITMQ_PORT=5672
    - FUNBIZMAP_REVIEWS_INPUTS=1
    - FUNBIZMAP_FUNBIZ_FILTERS=4
    image: funbiz_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_aggregator0:
    container_name: funcit_aggregator0
    depends_on:
    - funcit_filter0
    - funcit_filter1
    - funcit_filter2
    - funcit_filter3
    entrypoint: /aggregator
    environment:
    - FUNCITAGG_INSTANCE=0
    - FUNCITAGG_RABBITMQ_IP=rabbitmq
    - FUNCITAGG_RABBITMQ_PORT=5672
    - FUNCITAGG_FUNCIT_JOINERS=4
    - FUNCITAGG_FUNCIT_FILTERS=4
    - FUNCITAGG_INPUT_TOPIC=0
    image: funcit_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_aggregator1:
    container_name: funcit_aggregator1
    depends_on:
    - funcit_filter0
    - funcit_filter1
    - funcit_filter2
    - funcit_filter3
    entrypoint: /aggregator
    environment:
    - FUNCITAGG_INSTANCE=1
    - FUNCITAGG_RABBITMQ_IP=rabbitmq
    - FUNCITAGG_RABBITMQ_PORT=5672
    - FUNCITAGG_FUNCIT_JOINERS=4
    - FUNCITAGG_FUNCIT_FILTERS=4
    - FUNCITAGG_INPUT_TOPIC=1
    image: funcit_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_aggregator2:
    container_name: funcit_aggregator2
    depends_on:
    - funcit_filter0
    - funcit_filter1
    - funcit_filter2
    - funcit_filter3
    entrypoint: /aggregator
    environment:
    - FUNCITAGG_INSTANCE=2
    - FUNCITAGG_RABBITMQ_IP=rabbitmq
    - FUNCITAGG_RABBITMQ_PORT=5672
    - FUNCITAGG_FUNCIT_JOINERS=4
    - FUNCITAGG_FUNCIT_FILTERS=4
    - FUNCITAGG_INPUT_TOPIC=2
    image: funcit_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_aggregator3:
    container_name: funcit_aggregator3
    depends_on:
    - funcit_filter0
    - funcit_filter1
    - funcit_filter2
    - funcit_filter3
    entrypoint: /aggregator
    environment:
    - FUNCITAGG_INSTANCE=3
    - FUNCITAGG_RABBITMQ_IP=rabbitmq
    - FUNCITAGG_RABBITMQ_PORT=5672
    - FUNCITAGG_FUNCIT_JOINERS=4
    - FUNCITAGG_FUNCIT_FILTERS=4
    - FUNCITAGG_INPUT_TOPIC=3
    image: funcit_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_filter0:
    container_name: funcit_filter0
    depends_on:
    - top_funniest_cities_prettier
    entrypoint: /filter
    environment:
    - FUNCITFIL_INSTANCE=0
    - FUNCITFIL_RABBITMQ_IP=rabbitmq
    - FUNCITFIL_RABBITMQ_PORT=5672
    - FUNCITFIL_FUNCIT_AGGREGATORS=4
    image: funcit_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_filter1:
    container_name: funcit_filter1
    depends_on:
    - top_funniest_cities_prettier
    entrypoint: /filter
    environment:
    - FUNCITFIL_INSTANCE=1
    - FUNCITFIL_RABBITMQ_IP=rabbitmq
    - FUNCITFIL_RABBITMQ_PORT=5672
    - FUNCITFIL_FUNCIT_AGGREGATORS=4
    image: funcit_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_filter2:
    container_name: funcit_filter2
    depends_on:
    - top_funniest_cities_prettier
    entrypoint: /filter
    environment:
    - FUNCITFIL_INSTANCE=2
    - FUNCITFIL_RABBITMQ_IP=rabbitmq
    - FUNCITFIL_RABBITMQ_PORT=5672
    - FUNCITFIL_FUNCIT_AGGREGATORS=4
    image: funcit_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_filter3:
    container_name: funcit_filter3
    depends_on:
    - top_funniest_cities_prettier
    entrypoint: /filter
    environment:
    - FUNCITFIL_INSTANCE=3
    - FUNCITFIL_RABBITMQ_IP=rabbitmq
    - FUNCITFIL_RABBITMQ_PORT=5672
    - FUNCITFIL_FUNCIT_AGGREGATORS=4
    image: funcit_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_joiner0:
    container_name: funcit_joiner0
    depends_on:
    - funcit_aggregator0
    - funcit_aggregator1
    - funcit_aggregator2
    - funcit_aggregator3
    entrypoint: /joiner
    environment:
    - FUNCITJOIN_INSTANCE=0
    - FUNCITJOIN_RABBITMQ_IP=rabbitmq
    - FUNCITJOIN_RABBITMQ_PORT=5672
    - FUNCITJOIN_FUNBIZ_AGGREGATORS=4
    - FUNCITJOIN_CITBIZ_MAPPERS=4
    - FUNCITJOIN_FUNCIT_AGGREGATORS=4
    - FUNCITJOIN_INPUT_TOPIC=0
    image: funcit_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_joiner1:
    container_name: funcit_joiner1
    depends_on:
    - funcit_aggregator0
    - funcit_aggregator1
    - funcit_aggregator2
    - funcit_aggregator3
    entrypoint: /joiner
    environment:
    - FUNCITJOIN_INSTANCE=1
    - FUNCITJOIN_RABBITMQ_IP=rabbitmq
    - FUNCITJOIN_RABBITMQ_PORT=5672
    - FUNCITJOIN_FUNBIZ_AGGREGATORS=4
    - FUNCITJOIN_CITBIZ_MAPPERS=4
    - FUNCITJOIN_FUNCIT_AGGREGATORS=4
    - FUNCITJOIN_INPUT_TOPIC=1
    image: funcit_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_joiner2:
    container_name: funcit_joiner2
    depends_on:
    - funcit_aggregator0
    - funcit_aggregator1
    - funcit_aggregator2
    - funcit_aggregator3
    entrypoint: /joiner
    environment:
    - FUNCITJOIN_INSTANCE=2
    - FUNCITJOIN_RABBITMQ_IP=rabbitmq
    - FUNCITJOIN_RABBITMQ_PORT=5672
    - FUNCITJOIN_FUNBIZ_AGGREGATORS=4
    - FUNCITJOIN_CITBIZ_MAPPERS=4
    - FUNCITJOIN_FUNCIT_AGGREGATORS=4
    - FUNCITJOIN_INPUT_TOPIC=2
    image: funcit_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  funcit_joiner3:
    container_name: funcit_joiner3
    depends_on:
    - funcit_aggregator0
    - funcit_aggregator1
    - funcit_aggregator2
    - funcit_aggregator3
    entrypoint: /joiner
    environment:
    - FUNCITJOIN_INSTANCE=3
    - FUNCITJOIN_RABBITMQ_IP=rabbitmq
    - FUNCITJOIN_RABBITMQ_PORT=5672
    - FUNCITJOIN_FUNBIZ_AGGREGATORS=4
    - FUNCITJOIN_CITBIZ_MAPPERS=4
    - FUNCITJOIN_FUNCIT_AGGREGATORS=4
    - FUNCITJOIN_INPUT_TOPIC=3
    image: funcit_joiner:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  hash_aggregator0:
    container_name: hash_aggregator0
    depends_on:
    - dishash_aggregator0
    - dishash_aggregator1
    - dishash_aggregator2
    - dishash_aggregator3
    entrypoint: /aggregator
    environment:
    - HASHAGG_INSTANCE=0
    - HASHAGG_RABBITMQ_IP=rabbitmq
    - HASHAGG_RABBITMQ_PORT=5672
    - HASHAGG_INPUT_TOPIC=0
    - HASHAGG_HASH_MAPPERS=4
    - HASHAGG_DISHASH_AGGREGATORS=4
    image: hash_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  hash_aggregator1:
    container_name: hash_aggregator1
    depends_on:
    - dishash_aggregator0
    - dishash_aggregator1
    - dishash_aggregator2
    - dishash_aggregator3
    entrypoint: /aggregator
    environment:
    - HASHAGG_INSTANCE=1
    - HASHAGG_RABBITMQ_IP=rabbitmq
    - HASHAGG_RABBITMQ_PORT=5672
    - HASHAGG_INPUT_TOPIC=1
    - HASHAGG_HASH_MAPPERS=4
    - HASHAGG_DISHASH_AGGREGATORS=4
    image: hash_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  hash_aggregator2:
    container_name: hash_aggregator2
    depends_on:
    - dishash_aggregator0
    - dishash_aggregator1
    - dishash_aggregator2
    - dishash_aggregator3
    entrypoint: /aggregator
    environment:
    - HASHAGG_INSTANCE=2
    - HASHAGG_RABBITMQ_IP=rabbitmq
    - HASHAGG_RABBITMQ_PORT=5672
    - HASHAGG_INPUT_TOPIC=2
    - HASHAGG_HASH_MAPPERS=4
    - HASHAGG_DISHASH_AGGREGATORS=4
    image: hash_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  hash_aggregator3:
    container_name: hash_aggregator3
    depends_on:
    - dishash_aggregator0
    - dishash_aggregator1
    - dishash_aggregator2
    - dishash_aggregator3
    entrypoint: /aggregator
    environment:
    - HASHAGG_INSTANCE=3
    - HASHAGG_RABBITMQ_IP=rabbitmq
    - HASHAGG_RABBITMQ_PORT=5672
    - HASHAGG_INPUT_TOPIC=3
    - HASHAGG_HASH_MAPPERS=4
    - HASHAGG_DISHASH_AGGREGATORS=4
    image: hash_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  hash_mapper0:
    container_name: hash_mapper0
    depends_on:
    - hash_aggregator0
    - hash_aggregator1
    - hash_aggregator2
    - hash_aggregator3
    entrypoint: /mapper
    environment:
    - HASHMAP_INSTANCE=0
    - HASHMAP_RABBITMQ_IP=rabbitmq
    - HASHMAP_RABBITMQ_PORT=5672
    - HASHMAP_REVIEWS_INPUTS=1
    - HASHMAP_HASH_AGGREGATORS=4
    image: hash_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  hash_mapper1:
    container_name: hash_mapper1
    depends_on:
    - hash_aggregator0
    - hash_aggregator1
    - hash_aggregator2
    - hash_aggregator3
    entrypoint: /mapper
    environment:
    - HASHMAP_INSTANCE=1
    - HASHMAP_RABBITMQ_IP=rabbitmq
    - HASHMAP_RABBITMQ_PORT=5672
    - HASHMAP_REVIEWS_INPUTS=1
    - HASHMAP_HASH_AGGREGATORS=4
    image: hash_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  hash_mapper2:
    container_name: hash_mapper2
    depends_on:
    - hash_aggregator0
    - hash_aggregator1
    - hash_aggregator2
    - hash_aggregator3
    entrypoint: /mapper
    environment:
    - HASHMAP_INSTANCE=2
    - HASHMAP_RABBITMQ_IP=rabbitmq
    - HASHMAP_RABBITMQ_PORT=5672
    - HASHMAP_REVIEWS_INPUTS=1
    - HASHMAP_HASH_AGGREGATORS=4
    image: hash_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  hash_mapper3:
    container_name: hash_mapper3
    depends_on:
    - hash_aggregator0
    - hash_aggregator1
    - hash_aggregator2
    - hash_aggregator3
    entrypoint: /mapper
    environment:
    - HASHMAP_INSTANCE=3
    - HASHMAP_RABBITMQ_IP=rabbitmq
    - HASHMAP_RABBITMQ_PORT=5672
    - HASHMAP_REVIEWS_INPUTS=1
    - HASHMAP_HASH_AGGREGATORS=4
    image: hash_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  rabbitmq:
    container_name: rabbitmq
    healthcheck:
      interval: 10s
      retries: '10'
      test: '["CMD", "curl", "-f", "http://rabbitmq:156722]'
      timeout: 5s
    image: rabbitmq:custom
    logging:
      driver: none
    networks:
    - testing_net
    ports:
    - 15672:15672
  rvw_scatter:
    container_name: rvw_scatter
    depends_on:
    - funbiz_mapper0
    - funbiz_mapper1
    - funbiz_mapper2
    - funbiz_mapper3
    - weekday_mapper0
    - weekday_mapper1
    - weekday_mapper2
    - stars_mapper0
    - stars_mapper1
    - stars_mapper2
    - stars_mapper3
    - hash_mapper0
    - hash_mapper1
    - hash_mapper2
    - hash_mapper3
    - user_mapper0
    - user_mapper1
    - user_mapper2
    - user_mapper3
    - user_mapper4
    - user_mapper5
    entrypoint: /scatter
    environment:
    - RVWSCA_INSTANCE=0
    - RVWSCA_REVIEWS_DATA=/data/reviews.json
    - RVWSCA_RABBITMQ_IP=rabbitmq
    - RVWSCA_RABBITMQ_PORT=5672
    - RVWSCA_WORKERS_POOL=200
    - RVWSCA_FUNBIZ_MAPPERS=4
    - RVWSCA_WEEKDAYS_MAPPERS=3
    - RVWSCA_HASHES_MAPPERS=4
    - RVWSCA_USERS_MAPPERS=6
    - RVWSCA_STARS_MAPPERS=4
    image: rvw_scatter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
    volumes:
    - reviews_dataset:/data
  sink:
    container_name: sink
    depends_on:
    - rabbitmq
    entrypoint: /sink
    environment:
    - SINK_RABBITMQ_IP=rabbitmq
    - SINK_RABBITMQ_PORT=5672
    image: sink:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_aggregator0:
    container_name: stars_aggregator0
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    entrypoint: /aggregator
    environment:
    - STARSAGG_INSTANCE=0
    - STARSAGG_RABBITMQ_IP=rabbitmq
    - STARSAGG_RABBITMQ_PORT=5672
    - STARSAGG_INPUT_TOPIC=0
    - STARSAGG_STARS_FILTERS=4
    - STARSAGG_STARS_JOINERS=4
    image: stars_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_aggregator1:
    container_name: stars_aggregator1
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    entrypoint: /aggregator
    environment:
    - STARSAGG_INSTANCE=1
    - STARSAGG_RABBITMQ_IP=rabbitmq
    - STARSAGG_RABBITMQ_PORT=5672
    - STARSAGG_INPUT_TOPIC=1
    - STARSAGG_STARS_FILTERS=4
    - STARSAGG_STARS_JOINERS=4
    image: stars_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_aggregator2:
    container_name: stars_aggregator2
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    entrypoint: /aggregator
    environment:
    - STARSAGG_INSTANCE=2
    - STARSAGG_RABBITMQ_IP=rabbitmq
    - STARSAGG_RABBITMQ_PORT=5672
    - STARSAGG_INPUT_TOPIC=2
    - STARSAGG_STARS_FILTERS=4
    - STARSAGG_STARS_JOINERS=4
    image: stars_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_aggregator3:
    container_name: stars_aggregator3
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    entrypoint: /aggregator
    environment:
    - STARSAGG_INSTANCE=3
    - STARSAGG_RABBITMQ_IP=rabbitmq
    - STARSAGG_RABBITMQ_PORT=5672
    - STARSAGG_INPUT_TOPIC=3
    - STARSAGG_STARS_FILTERS=4
    - STARSAGG_STARS_JOINERS=4
    image: stars_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_filter0:
    container_name: stars_filter0
    depends_on:
    - stars_aggregator0
    - stars_aggregator1
    - stars_aggregator2
    - stars_aggregator3
    entrypoint: /filter
    environment:
    - STARSFIL_INSTANCE=0
    - STARSFIL_RABBITMQ_IP=rabbitmq
    - STARSFIL_RABBITMQ_PORT=5672
    - STARSFIL_STARS_MAPPERS=4
    - STARSFIL_STARS_AGGREGATORS=4
    image: stars_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_filter1:
    container_name: stars_filter1
    depends_on:
    - stars_aggregator0
    - stars_aggregator1
    - stars_aggregator2
    - stars_aggregator3
    entrypoint: /filter
    environment:
    - STARSFIL_INSTANCE=1
    - STARSFIL_RABBITMQ_IP=rabbitmq
    - STARSFIL_RABBITMQ_PORT=5672
    - STARSFIL_STARS_MAPPERS=4
    - STARSFIL_STARS_AGGREGATORS=4
    image: stars_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_filter2:
    container_name: stars_filter2
    depends_on:
    - stars_aggregator0
    - stars_aggregator1
    - stars_aggregator2
    - stars_aggregator3
    entrypoint: /filter
    environment:
    - STARSFIL_INSTANCE=2
    - STARSFIL_RABBITMQ_IP=rabbitmq
    - STARSFIL_RABBITMQ_PORT=5672
    - STARSFIL_STARS_MAPPERS=4
    - STARSFIL_STARS_AGGREGATORS=4
    image: stars_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_filter3:
    container_name: stars_filter3
    depends_on:
    - stars_aggregator0
    - stars_aggregator1
    - stars_aggregator2
    - stars_aggregator3
    entrypoint: /filter
    environment:
    - STARSFIL_INSTANCE=3
    - STARSFIL_RABBITMQ_IP=rabbitmq
    - STARSFIL_RABBITMQ_PORT=5672
    - STARSFIL_STARS_MAPPERS=4
    - STARSFIL_STARS_AGGREGATORS=4
    image: stars_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_mapper0:
    container_name: stars_mapper0
    depends_on:
    - stars_filter0
    - stars_filter1
    - stars_filter2
    - stars_filter3
    entrypoint: /mapper
    environment:
    - STARSMAP_INSTANCE=0
    - STARSMAP_RABBITMQ_IP=rabbitmq
    - STARSMAP_RABBITMQ_PORT=5672
    - STARSMAP_REVIEWS_INPUTS=1
    - STARSMAP_STARS_FILTERS=4
    image: stars_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_mapper1:
    container_name: stars_mapper1
    depends_on:
    - stars_filter0
    - stars_filter1
    - stars_filter2
    - stars_filter3
    entrypoint: /mapper
    environment:
    - STARSMAP_INSTANCE=1
    - STARSMAP_RABBITMQ_IP=rabbitmq
    - STARSMAP_RABBITMQ_PORT=5672
    - STARSMAP_REVIEWS_INPUTS=1
    - STARSMAP_STARS_FILTERS=4
    image: stars_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_mapper2:
    container_name: stars_mapper2
    depends_on:
    - stars_filter0
    - stars_filter1
    - stars_filter2
    - stars_filter3
    entrypoint: /mapper
    environment:
    - STARSMAP_INSTANCE=2
    - STARSMAP_RABBITMQ_IP=rabbitmq
    - STARSMAP_RABBITMQ_PORT=5672
    - STARSMAP_REVIEWS_INPUTS=1
    - STARSMAP_STARS_FILTERS=4
    image: stars_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  stars_mapper3:
    container_name: stars_mapper3
    depends_on:
    - stars_filter0
    - stars_filter1
    - stars_filter2
    - stars_filter3
    entrypoint: /mapper
    environment:
    - STARSMAP_INSTANCE=3
    - STARSMAP_RABBITMQ_IP=rabbitmq
    - STARSMAP_RABBITMQ_PORT=5672
    - STARSMAP_REVIEWS_INPUTS=1
    - STARSMAP_STARS_FILTERS=4
    image: stars_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  top_funniest_cities_prettier:
    container_name: top_funniest_cities_prettier
    depends_on:
    - sink
    entrypoint: /prettier
    environment:
    - FUNCITPRE_RABBITMQ_IP=rabbitmq
    - FUNCITPRE_RABBITMQ_PORT=5672
    - FUNCITPRE_FUNCIT_FILTERS=4
    image: top_funniest_cities_prettier:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  top_users_prettier:
    container_name: top_users_prettier
    depends_on:
    - sink
    entrypoint: /prettier
    environment:
    - TOPUSERPRE_RABBITMQ_IP=rabbitmq
    - TOPUSERPRE_RABBITMQ_PORT=5672
    - TOPUSERPRE_USER_FILTERS=6
    image: top_users_prettier:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_aggregator0:
    container_name: user_aggregator0
    depends_on:
    - botuser_filter0
    - botuser_filter1
    - botuser_filter2
    - botuser_filter3
    - user_filter0
    - user_filter1
    - user_filter2
    - user_filter3
    - user_filter4
    - user_filter5
    entrypoint: /aggregator
    environment:
    - USERAGG_INSTANCE=0
    - USERAGG_RABBITMQ_IP=rabbitmq
    - USERAGG_RABBITMQ_PORT=5672
    - USERAGG_INPUT_TOPIC=0
    - USERAGG_USER_MAPPERS=6
    - USERAGG_USER_FILTERS=6
    - USERAGG_BOTUSER_FILTERS=4
    image: user_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_aggregator1:
    container_name: user_aggregator1
    depends_on:
    - botuser_filter0
    - botuser_filter1
    - botuser_filter2
    - botuser_filter3
    - user_filter0
    - user_filter1
    - user_filter2
    - user_filter3
    - user_filter4
    - user_filter5
    entrypoint: /aggregator
    environment:
    - USERAGG_INSTANCE=1
    - USERAGG_RABBITMQ_IP=rabbitmq
    - USERAGG_RABBITMQ_PORT=5672
    - USERAGG_INPUT_TOPIC=1
    - USERAGG_USER_MAPPERS=6
    - USERAGG_USER_FILTERS=6
    - USERAGG_BOTUSER_FILTERS=4
    image: user_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_aggregator2:
    container_name: user_aggregator2
    depends_on:
    - botuser_filter0
    - botuser_filter1
    - botuser_filter2
    - botuser_filter3
    - user_filter0
    - user_filter1
    - user_filter2
    - user_filter3
    - user_filter4
    - user_filter5
    entrypoint: /aggregator
    environment:
    - USERAGG_INSTANCE=2
    - USERAGG_RABBITMQ_IP=rabbitmq
    - USERAGG_RABBITMQ_PORT=5672
    - USERAGG_INPUT_TOPIC=2
    - USERAGG_USER_MAPPERS=6
    - USERAGG_USER_FILTERS=6
    - USERAGG_BOTUSER_FILTERS=4
    image: user_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_aggregator3:
    container_name: user_aggregator3
    depends_on:
    - botuser_filter0
    - botuser_filter1
    - botuser_filter2
    - botuser_filter3
    - user_filter0
    - user_filter1
    - user_filter2
    - user_filter3
    - user_filter4
    - user_filter5
    entrypoint: /aggregator
    environment:
    - USERAGG_INSTANCE=3
    - USERAGG_RABBITMQ_IP=rabbitmq
    - USERAGG_RABBITMQ_PORT=5672
    - USERAGG_INPUT_TOPIC=3
    - USERAGG_USER_MAPPERS=6
    - USERAGG_USER_FILTERS=6
    - USERAGG_BOTUSER_FILTERS=4
    image: user_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_aggregator4:
    container_name: user_aggregator4
    depends_on:
    - botuser_filter0
    - botuser_filter1
    - botuser_filter2
    - botuser_filter3
    - user_filter0
    - user_filter1
    - user_filter2
    - user_filter3
    - user_filter4
    - user_filter5
    entrypoint: /aggregator
    environment:
    - USERAGG_INSTANCE=4
    - USERAGG_RABBITMQ_IP=rabbitmq
    - USERAGG_RABBITMQ_PORT=5672
    - USERAGG_INPUT_TOPIC=4
    - USERAGG_USER_MAPPERS=6
    - USERAGG_USER_FILTERS=6
    - USERAGG_BOTUSER_FILTERS=4
    image: user_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_aggregator5:
    container_name: user_aggregator5
    depends_on:
    - botuser_filter0
    - botuser_filter1
    - botuser_filter2
    - botuser_filter3
    - user_filter0
    - user_filter1
    - user_filter2
    - user_filter3
    - user_filter4
    - user_filter5
    entrypoint: /aggregator
    environment:
    - USERAGG_INSTANCE=5
    - USERAGG_RABBITMQ_IP=rabbitmq
    - USERAGG_RABBITMQ_PORT=5672
    - USERAGG_INPUT_TOPIC=5
    - USERAGG_USER_MAPPERS=6
    - USERAGG_USER_FILTERS=6
    - USERAGG_BOTUSER_FILTERS=4
    image: user_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_filter0:
    container_name: user_filter0
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    - top_users_prettier
    entrypoint: /filter
    environment:
    - USERFIL_INSTANCE=0
    - USERFIL_RABBITMQ_IP=rabbitmq
    - USERFIL_RABBITMQ_PORT=5672
    - USERFIL_MIN_REVIEWS=50
    - USERFIL_USER_AGGREGATORS=6
    - USERFIL_STARS_JOINERS=4
    image: user_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_filter1:
    container_name: user_filter1
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    - top_users_prettier
    entrypoint: /filter
    environment:
    - USERFIL_INSTANCE=1
    - USERFIL_RABBITMQ_IP=rabbitmq
    - USERFIL_RABBITMQ_PORT=5672
    - USERFIL_MIN_REVIEWS=50
    - USERFIL_USER_AGGREGATORS=6
    - USERFIL_STARS_JOINERS=4
    image: user_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_filter2:
    container_name: user_filter2
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    - top_users_prettier
    entrypoint: /filter
    environment:
    - USERFIL_INSTANCE=2
    - USERFIL_RABBITMQ_IP=rabbitmq
    - USERFIL_RABBITMQ_PORT=5672
    - USERFIL_MIN_REVIEWS=50
    - USERFIL_USER_AGGREGATORS=6
    - USERFIL_STARS_JOINERS=4
    image: user_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_filter3:
    container_name: user_filter3
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    - top_users_prettier
    entrypoint: /filter
    environment:
    - USERFIL_INSTANCE=3
    - USERFIL_RABBITMQ_IP=rabbitmq
    - USERFIL_RABBITMQ_PORT=5672
    - USERFIL_MIN_REVIEWS=50
    - USERFIL_USER_AGGREGATORS=6
    - USERFIL_STARS_JOINERS=4
    image: user_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_filter4:
    container_name: user_filter4
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    - top_users_prettier
    entrypoint: /filter
    environment:
    - USERFIL_INSTANCE=4
    - USERFIL_RABBITMQ_IP=rabbitmq
    - USERFIL_RABBITMQ_PORT=5672
    - USERFIL_MIN_REVIEWS=50
    - USERFIL_USER_AGGREGATORS=6
    - USERFIL_STARS_JOINERS=4
    image: user_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_filter5:
    container_name: user_filter5
    depends_on:
    - bestuser_joiner0
    - bestuser_joiner1
    - bestuser_joiner2
    - bestuser_joiner3
    - top_users_prettier
    entrypoint: /filter
    environment:
    - USERFIL_INSTANCE=5
    - USERFIL_RABBITMQ_IP=rabbitmq
    - USERFIL_RABBITMQ_PORT=5672
    - USERFIL_MIN_REVIEWS=50
    - USERFIL_USER_AGGREGATORS=6
    - USERFIL_STARS_JOINERS=4
    image: user_filter:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_mapper0:
    container_name: user_mapper0
    depends_on:
    - user_aggregator0
    - user_aggregator1
    - user_aggregator2
    - user_aggregator3
    - user_aggregator4
    - user_aggregator5
    entrypoint: /mapper
    environment:
    - USERMAP_INSTANCE=0
    - USERMAP_RABBITMQ_IP=rabbitmq
    - USERMAP_RABBITMQ_PORT=5672
    - USERMAP_REVIEWS_INPUTS=1
    - USERMAP_USER_AGGREGATORS=6
    image: user_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_mapper1:
    container_name: user_mapper1
    depends_on:
    - user_aggregator0
    - user_aggregator1
    - user_aggregator2
    - user_aggregator3
    - user_aggregator4
    - user_aggregator5
    entrypoint: /mapper
    environment:
    - USERMAP_INSTANCE=1
    - USERMAP_RABBITMQ_IP=rabbitmq
    - USERMAP_RABBITMQ_PORT=5672
    - USERMAP_REVIEWS_INPUTS=1
    - USERMAP_USER_AGGREGATORS=6
    image: user_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_mapper2:
    container_name: user_mapper2
    depends_on:
    - user_aggregator0
    - user_aggregator1
    - user_aggregator2
    - user_aggregator3
    - user_aggregator4
    - user_aggregator5
    entrypoint: /mapper
    environment:
    - USERMAP_INSTANCE=2
    - USERMAP_RABBITMQ_IP=rabbitmq
    - USERMAP_RABBITMQ_PORT=5672
    - USERMAP_REVIEWS_INPUTS=1
    - USERMAP_USER_AGGREGATORS=6
    image: user_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_mapper3:
    container_name: user_mapper3
    depends_on:
    - user_aggregator0
    - user_aggregator1
    - user_aggregator2
    - user_aggregator3
    - user_aggregator4
    - user_aggregator5
    entrypoint: /mapper
    environment:
    - USERMAP_INSTANCE=3
    - USERMAP_RABBITMQ_IP=rabbitmq
    - USERMAP_RABBITMQ_PORT=5672
    - USERMAP_REVIEWS_INPUTS=1
    - USERMAP_USER_AGGREGATORS=6
    image: user_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_mapper4:
    container_name: user_mapper4
    depends_on:
    - user_aggregator0
    - user_aggregator1
    - user_aggregator2
    - user_aggregator3
    - user_aggregator4
    - user_aggregator5
    entrypoint: /mapper
    environment:
    - USERMAP_INSTANCE=4
    - USERMAP_RABBITMQ_IP=rabbitmq
    - USERMAP_RABBITMQ_PORT=5672
    - USERMAP_REVIEWS_INPUTS=1
    - USERMAP_USER_AGGREGATORS=6
    image: user_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  user_mapper5:
    container_name: user_mapper5
    depends_on:
    - user_aggregator0
    - user_aggregator1
    - user_aggregator2
    - user_aggregator3
    - user_aggregator4
    - user_aggregator5
    entrypoint: /mapper
    environment:
    - USERMAP_INSTANCE=5
    - USERMAP_RABBITMQ_IP=rabbitmq
    - USERMAP_RABBITMQ_PORT=5672
    - USERMAP_REVIEWS_INPUTS=1
    - USERMAP_USER_AGGREGATORS=6
    image: user_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  weekday_aggregator0:
    container_name: weekday_aggregator0
    depends_on:
    - weekday_histogram_prettier
    entrypoint: /aggregator
    environment:
    - WEEKDAYAGG_INSTANCE=0
    - WEEKDAYAGG_RABBITMQ_IP=rabbitmq
    - WEEKDAYAGG_RABBITMQ_PORT=5672
    - WEEKDAYAGG_INPUT_TOPIC=0
    - WEEKDAYAGG_WEEKDAY_MAPPERS=3
    image: weekday_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  weekday_aggregator1:
    container_name: weekday_aggregator1
    depends_on:
    - weekday_histogram_prettier
    entrypoint: /aggregator
    environment:
    - WEEKDAYAGG_INSTANCE=1
    - WEEKDAYAGG_RABBITMQ_IP=rabbitmq
    - WEEKDAYAGG_RABBITMQ_PORT=5672
    - WEEKDAYAGG_INPUT_TOPIC=1
    - WEEKDAYAGG_WEEKDAY_MAPPERS=3
    image: weekday_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  weekday_aggregator2:
    container_name: weekday_aggregator2
    depends_on:
    - weekday_histogram_prettier
    entrypoint: /aggregator
    environment:
    - WEEKDAYAGG_INSTANCE=2
    - WEEKDAYAGG_RABBITMQ_IP=rabbitmq
    - WEEKDAYAGG_RABBITMQ_PORT=5672
    - WEEKDAYAGG_INPUT_TOPIC=2
    - WEEKDAYAGG_WEEKDAY_MAPPERS=3
    image: weekday_aggregator:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  weekday_histogram_prettier:
    container_name: weekday_histogram_prettier
    depends_on:
    - sink
    entrypoint: /prettier
    environment:
    - HISTOPRE=0
    - HISTOPRE_RABBITMQ_IP=rabbitmq
    - HISTOPRE_RABBITMQ_PORT=5672
    - HISTOPRE_WEEKDAY_AGGREGATORS=3
    image: weekday_histogram_prettier:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  weekday_mapper0:
    container_name: weekday_mapper0
    depends_on:
    - weekday_aggregator0
    - weekday_aggregator1
    - weekday_aggregator2
    entrypoint: /mapper
    environment:
    - WEEKDAYMAP_INSTANCE=0
    - WEEKDAYMAP_RABBITMQ_IP=rabbitmq
    - WEEKDAYMAP_RABBITMQ_PORT=5672
    - WEEKDAYMAP_REVIEWS_INPUTS=1
    - WEEKDAYMAP_WEEKDAY_AGGREGATORS=3
    image: weekday_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  weekday_mapper1:
    container_name: weekday_mapper1
    depends_on:
    - weekday_aggregator0
    - weekday_aggregator1
    - weekday_aggregator2
    entrypoint: /mapper
    environment:
    - WEEKDAYMAP_INSTANCE=1
    - WEEKDAYMAP_RABBITMQ_IP=rabbitmq
    - WEEKDAYMAP_RABBITMQ_PORT=5672
    - WEEKDAYMAP_REVIEWS_INPUTS=1
    - WEEKDAYMAP_WEEKDAY_AGGREGATORS=3
    image: weekday_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
  weekday_mapper2:
    container_name: weekday_mapper2
    depends_on:
    - weekday_aggregator0
    - weekday_aggregator1
    - weekday_aggregator2
    entrypoint: /mapper
    environment:
    - WEEKDAYMAP_INSTANCE=2
    - WEEKDAYMAP_RABBITMQ_IP=rabbitmq
    - WEEKDAYMAP_RABBITMQ_PORT=5672
    - WEEKDAYMAP_REVIEWS_INPUTS=1
    - WEEKDAYMAP_WEEKDAY_AGGREGATORS=3
    image: weekday_mapper:latest
    links:
    - rabbitmq
    networks:
    - testing_net
    restart: on-failure
version: '3'
volumes:
  business_dataset:
    driver: local
    driver_opts:
      device: $PWD/datasets/business
      o: bind
      type: none
  reviews_dataset:
    driver: local
    driver_opts:
      device: $PWD/datasets/reviews
      o: bind
      type: none
